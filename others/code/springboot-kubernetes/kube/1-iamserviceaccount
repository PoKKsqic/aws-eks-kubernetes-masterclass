eksctl utils associate-iam-oidc-provider --region=us-east-1 --cluster=eks --approve

kubectl create namespace server

eksctl create iamserviceaccount \
--name default \
--namespace server \
--cluster eks \
--attach-policy-arn arn:aws:iam::123456789123:policy/nginx \
--approve \
--override-existing-serviceaccounts --region us-east-1

eksctl create iamserviceaccount \
--name aws-load-balancer-controller \
--namespace kube-system \
--cluster eks \
--attach-policy-arn arn:aws:iam::123456789123:policy/ALBIngressControllerIAMPolicy \
--approve \
--override-existing-serviceaccounts --region us-east-1

eksctl create iamserviceaccount \
--name cluster-autoscaler \
--namespace kube-system \
--cluster eks \
--attach-policy-arn arn:aws:iam::123456789123:policy/AutoScalerPolicy \
--approve \
--override-existing-serviceaccounts --region us-east-1

eksctl get iamserviceaccount --cluster eks

kubectl annotate serviceaccount -n server default eks.amazonaws.com/role-arn=arn:aws:iam::123456789123:role/eksctl-eks-addon-iamserviceaccount-Role
